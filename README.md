## 🏗️ 데이터 파이프라인 구축 (My Role)

경제 뉴스 데이터를 수집하고 AI가 생성한 퀴즈를 데이터베이스에 체계적으로 저장하는 **자동화 파이프라인 구현**을 담당했습니다.

### 💡 아이디어 및 기술 채택 이유
* **n8n을 이용한 프로세스 자동화**: 매일 반복되는 뉴스 수집과 문제 생성 과정을 수동 작업 없이 정해진 시간에 실행하기 위해 사용했습니다.
* **Insert or Update를 통한 데이터 무결성 유지**: 매일 같은 사이트를 크롤링할 때 동일한 기사가 중복으로 저장되는 문제가 생길 수 있습니다. articles 테이블의 **url** 컬럼에 UNIQUE 제약을 부여하고, n8n에서 **Insert or Update** 옵션을 설정하여 이미 존재하는 기사는 최신 내용으로 업데이트하고 새로운 기사만 삽입하도록 설계했습니다. 이를 통해 DB 에러를 방지하고 데이터의 일관성을 확보했습니다.

### 🛠️ 주요 구현 내용
* **뉴스 크롤링 및 데이터 전처리:** 크롤링한 뉴스 목록에서 개별 링크를 추출(**Split Out**)하고, 각 기사 본문을 파싱하여 AI가 읽기 좋은 형태로 가공했습니다.
* **관계형 데이터 연결:** 기사 정보(**articles**)를 저장할 때 생성된 ID 값을 가져와 퀴즈 데이터와 연결함으로써, 어떤 뉴스로 만든 문제인지 명확히 알 수 있게 적재했습니다.
* **JSON 형식 데이터 적재:** AI가 만든 퀴즈 리스트를 DB에 넣을 때, 데이터 구조가 깨지지 않도록 JSON 형식으로 변환하여 저장했습니다.
* **알림 시스템 구축:** 데이터 베이스에 축적된 개수를 체크하여 충분한 양의 문제가 모이면 discord 알림을 전송하도록 설계했습니다.

### 🚀 문제 해결 기록
1. **LLM 응답의 비정형성으로 인한 데이터 구조화의 어려움**
     - **문제 상황:** LLM이 생성한 퀴즈 데이터가 일정한 JSON 형식이 아니거나, 답변에 불필요한 텍스트가 포함되어 후속 노드에서 데이터를 식별하는 데 어려움이 발생했습니다.
     - **원인 분석:** 생성형 AI 특성 상 시스템 프롬프트에 따라 결과물이 바뀌는 가변성이 존재합니다.
     - **해결 방법:** 시스템 프롬프트에 출력 형식을 JSON으로 제한하고, 예시 데이터를 제공하여 출력의 일관성을 높였습니다.
2. **다량의 데이터 처리 시 워크플로우 중단**
     - **문제 상황:** 뉴스 목록에서 한 번에 20~30개 정도의 기사를 가져올 때 LLM 노드에서 전체 프로세스가 중단되는 문제가 발생했다.
     - **원인 분석:** AI가 한 번에 처리할 수 있는 양을 초과하여 에러가 생겼다.
     - **해결 방법:** Limit 노드를 배치하여 ai가 처리해야 하는 뉴스 데이터의 양을 줄였다.
