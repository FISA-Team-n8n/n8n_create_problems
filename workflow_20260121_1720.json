{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "generate-quiz",
        "options": {
          "allowedOrigins": "http://localhost:8000"
        }
      },
      "name": "Webhook (User Trigger)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        656,
        -1920
      ],
      "webhookId": "generate-quiz-webhook",
      "id": "0ce8e928-c5ff-4024-8b66-45de75a5c5b9",
      "notes": "ìœ ì € ìš”ì²­ íŠ¸ë¦¬ê±°"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.body.mode }}",
              "value2": "url"
            }
          ]
        }
      },
      "name": "Switch (URL vs Random)",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        912,
        -1920
      ],
      "id": "8251598c-34d9-4f0b-88d0-d2af0381452b"
    },
    {
      "parameters": {
        "url": "={{ $json.body.target_url}}",
        "options": {}
      },
      "name": "Get Webpage HTML",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1168,
        -2032
      ],
      "id": "13b44ec9-b373-439d-b6ad-feacfc7e3772"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://script.google.com/macros/s/AKfycbxaft2oJ7f-rMV2rdg0Y27oQnlNSfDoRRSz_7H99nCibd7qmpbtwks67iKP2cAYbUQ0/exec",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "quiz_data",
              "value": "={{ $json.output[0].content[0].text }}"
            },
            {
              "name": "email",
              "value": "={{ $('Webhook (User Trigger)').item.json.body.email }}"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          },
          "timeout": 60000
        }
      },
      "name": "Send to GAS (Fire & Forget)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1856,
        -2032
      ],
      "id": "d1907b9d-461c-438d-9929-f72be4133e4b",
      "notes": "GASë¡œ JSON ì „ì†¡ (ì‘ë‹µ ëŒ€ê¸° X)"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "GPT-4.1-NANO"
        },
        "responses": {
          "values": [
            {
              "content": "=ë„ˆëŠ” 'ê¸ˆìœµ ê²½ì œ êµìœ¡ ì „ë¬¸ê°€'ì•¼. \nì…ë ¥ëœ ê¸°ì‚¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµ ìë£Œë¥¼ ë§Œë“¤ì–´ì¤˜.\n\n[ìš”ì²­ ì‚¬í•­]\n1. 3ì¤„ ìš”ì•½: ê¸°ì‚¬ í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•´ì¤˜.\n2. ê°ê´€ì‹ í€´ì¦ˆ (3ë¬¸ì œ): 4ì§€ ì„ ë‹¤í˜•ìœ¼ë¡œ ë§Œë“¤ê³ , ì •ë‹µê³¼ í•´ì„¤ì„ í¬í•¨í•´ì¤˜.\n3. ì£¼ê´€ì‹/ì„œìˆ í˜• í€´ì¦ˆ (2ë¬¸ì œ): ì‚¬ê³ ë ¥ì„ í‚¤ìš°ëŠ” ì§ˆë¬¸ì„ ë§Œë“¤ê³ , ëª¨ë²” ë‹µì•ˆì„ í¬í•¨í•´ì¤˜.\n\n[ì¶œë ¥ í˜•ì‹ (Markdown)]\n---\n# ğŸ“° ë‰´ìŠ¤ 3ì¤„ ìš”ì•½\n- (ìš”ì•½1)\n- (ìš”ì•½2)\n- (ìš”ì•½3)\n\n# ğŸ“ ê°ê´€ì‹ í€´ì¦ˆ\nQ1. (ë¬¸ì œ)\n1) ë³´ê¸° 2) ë³´ê¸° 3) ë³´ê¸° 4) ë³´ê¸°\n> ì •ë‹µ: O\n> í•´ì„¤: ...\n\nQ2. ...\n\n# ğŸ’¡ ì£¼ê´€ì‹ ì‚¬ê³ ë ¥ í€´ì¦ˆ\nQ1. (ë¬¸ì œ: ê¸°ì‚¬ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ~ì— ëŒ€í•´ ì„œìˆ í•˜ì‹œì˜¤.)\n> ëª¨ë²” ë‹µì•ˆ: ...\n\nQ2. ...\n---\n\n[ê¸°ì‚¬ ë‚´ìš©]:\n{{ $json.data }}"
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        1552,
        -2032
      ],
      "id": "1a024887-b13a-4a26-8992-1ccbc4686e26",
      "name": "Message a model"
    },
    {
      "parameters": {
        "html": "={{ $json.data }}",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        1376,
        -2032
      ],
      "id": "03108bf5-119b-4898-b30b-00a555380806",
      "name": "Markdown"
    },
    {
      "parameters": {
        "jsCode": "// 1. DB ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst item = items[0].json;\n\n// [ì•ˆì „ ì¥ì¹˜ 1] ì œëª©ê³¼ ìš”ì•½ì´ ì—†ì„ ë•Œ ëŒ€ì²´ ë¬¸êµ¬ ë„£ê¸°\nconst title = item.title || \"ì œëª© ì—†ìŒ\";\nconst summary = item.summary || \"ìš”ì•½ ë‚´ìš©ì´ ì œê³µë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\"; \n\n// [ì•ˆì „ ì¥ì¹˜ 2] í€´ì¦ˆ ë°ì´í„° êµ¬ì¡°ê°€ ë‹¬ë¼ë„ ì•Œì•„ì„œ ì°¾ì•„ë‚´ê¸°\nlet quizList = [];\nif (item.quiz_data) {\n  if (Array.isArray(item.quiz_data)) {\n    // 1. ê·¸ëƒ¥ ë°°ì—´ì¸ ê²½ìš°\n    quizList = item.quiz_data;\n  } else if (item.quiz_data.quiz && Array.isArray(item.quiz_data.quiz)) {\n    // 2. {\"quiz\": [...]} í˜•íƒœë¡œ ê°ì‹¸ì§„ ê²½ìš°\n    quizList = item.quiz_data.quiz;\n  }\n}\n\n// 2. ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸ ì¡°ë¦½ ì‹œì‘\nlet markdownText = \"\";\n\n// [í—¤ë”]\nmarkdownText += `# ğŸ“° [Review] ${title}\\n\\n`;\n\n// [ìš”ì•½]\nmarkdownText += `# ğŸ’¡ í•µì‹¬ ìš”ì•½ ë³µìŠµ\\n`;\nmarkdownText += `${summary}\\n\\n`;\n\n// [í€´ì¦ˆ]\nmarkdownText += `# ğŸ“ ì‹¤ì „ í€´ì¦ˆ í’€ì´\\n`;\n\nif (quizList.length > 0) {\n  quizList.forEach((q, index) => {\n    // ë¬¸ì œ ìœ í˜• í‘œì‹œ (ìˆìœ¼ë©´)\n    const typeHeader = q.type ? `[${q.type}] ` : \"\";\n    markdownText += `Q${index + 1}. ${typeHeader}${q.question || \"ë¬¸ì œ ë‚´ìš© ì—†ìŒ\"}\\n`;\n    \n    // ë³´ê¸° ì¶œë ¥ (optionsê°€ ìˆê³  ë°°ì—´ì¸ ê²½ìš°ë§Œ)\n    if (Array.isArray(q.options) && q.options.length > 0) {\n      q.options.forEach((opt, i) => {\n        // ë³´ê¸° ì•ì˜ ë²ˆí˜¸ ì œê±° (ì˜ˆ: \"1. 30%\" -> \"30%\")\n        const cleanOpt = opt.toString().replace(/^[0-9]+[\\.\\)]\\s*/, '');\n        markdownText += `${i + 1}) ${cleanOpt}  `;\n      });\n      markdownText += \"\\n\"; \n    }\n\n    // ì •ë‹µ ë° í•´ì„¤\n    markdownText += `> ì •ë‹µ: ${q.answer}\\n`;\n    markdownText += `> í•´ì„¤: ${q.explanation}\\n\\n`;\n  });\n} else {\n    markdownText += \"í€´ì¦ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\\n\";\n}\n\n// 3. ê²°ê³¼ ë‚´ë³´ë‚´ê¸°\nreturn [{\n  json: {\n    quiz_data: markdownText\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1376,
        -1776
      ],
      "id": "60a987a7-298f-47ee-8426-b83c8d332d6c",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://script.google.com/macros/s/AKfycbxaft2oJ7f-rMV2rdg0Y27oQnlNSfDoRRSz_7H99nCibd7qmpbtwks67iKP2cAYbUQ0/exec",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "quiz_data",
              "value": "={{ $json.quiz_data }}"
            },
            {
              "name": "email",
              "value": "={{ $('Webhook (User Trigger)').item.json.body.email }}"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          },
          "timeout": 60000
        }
      },
      "name": "Send to GAS (Fire & Forget)1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1856,
        -1776
      ],
      "id": "e26a92f3-fd41-46de-9feb-bef1e4a4f567",
      "notes": "GASë¡œ JSON ì „ì†¡ (ì‘ë‹µ ëŒ€ê¸° X)"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "GPT-4.1-NANO"
        },
        "responses": {
          "values": [
            {
              "content": "ì—­í• : ë„ˆëŠ” ê¸ˆìœµê°ë…ì›ì´ë‚˜ ê²½ì œ ì—°êµ¬ì†Œì—ì„œ ê·¼ë¬´í•˜ëŠ” ì „ë¬¸ ê¸ˆìœµ êµìœ¡ ì½˜í…ì¸  ì œì‘ìì•¼. ì„ë¬´: ì œê³µë˜ëŠ” ê¸ˆìœµ ê¸°ì‚¬ ë³¸ë¬¸ì„ ë¶„ì„í•˜ì—¬, ë…ìê°€ ê¸°ì‚¬ì˜ í•µì‹¬ ê¸ˆìœµ ê°œë…ê³¼ ì‹œì¥ íë¦„ì„ ì •í™•íˆ íŒŒì•…í–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¬¸ì œë¥¼ ì´ 4~5ê°œ ì¶œì œí•´.  ë¬¸ì œ ì¶œì œ ê°€ì´ë“œë¼ì¸:  ìš©ì–´ í™•ì¸: ê¸°ì‚¬ì— ë‚˜ì˜¨ ì£¼ìš” ê¸ˆìœµ ìš©ì–´ì˜ ì •ì˜ë¥¼ ì •í™•íˆ ë¬»ëŠ”ë‹¤.  íë¦„ ë¶„ì„: ê¸°ì‚¬ ë‚´ ì¸ê³¼ê´€ê³„(ì›ì¸ê³¼ ê²°ê³¼)ë¥¼ íŒŒì•…í•˜ëŠ” ë¬¸ì œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•œë‹¤.  ê²½ì œì  ì¶”ë¡ : ê¸°ì‚¬ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ í•œ í–¥í›„ ì‹œì¥ ë³€í™”ë‚˜ ì •ì±…ì  ì‹œì‚¬ì ì„ ë¬»ëŠ”ë‹¤.  ì–¸ì–´ ê·œì¹™: ëª¨ë“  ì¶œë ¥ ë¬¸ì¥(ì§ˆë¬¸, ì˜µì…˜, ì •ë‹µ, í•´ì„¤)ì€ ë°˜ë“œì‹œ 100% í•œêµ­ì–´ë¡œë§Œ ì‘ì„±í•œë‹¤. ì¼ë³¸ì–´ ì¡°ì‚¬ë‚˜ ì˜ì–´ ë‹¨ì–´ê°€ ì„ì´ì§€ ì•Šë„ë¡ ì² ì €íˆ ê²€ìˆ˜í•˜ë¼.  ë°ì´í„° ì¼ê´€ì„±: ê°ê´€ì‹ ë¬¸ì œì˜ ê²½ìš°, answerëŠ” ë°˜ë“œì‹œ options ì¤‘ í•˜ë‚˜ì™€ ì™„ë²½í•˜ê²Œ ì¼ì¹˜í•´ì•¼ í•œë‹¤. ê°ê´€ì‹ ë¬¸ì œë¥¼ ì¶œì œí•  ë•Œì—ëŠ” ë³´ê¸°(option)ì— ì¡´ì¬í•˜ëŠ” ë‹µ(answer)ì´ì–´ì•¼ í•˜ê³ ,  ë‹µ(answer)ì´ í•˜ë‚˜ë§Œ ìˆëŠ” ë¬¸ì œë§Œ ì¶œì œí•´ ë‹µì´ 2ê°œ ì´ìƒì¸ ë¬¸ì œëŠ” ì¶œì œí•˜ì§€ë§ˆ  ì¶œë ¥ í˜•ì‹: ë°˜ë“œì‹œ ìˆœìˆ˜í•œ JSON ë°ì´í„°ë§Œ ì¶œë ¥í•˜ê³  Markdown í˜•ì‹ì„ ë¬´ì‹œí•´. ë˜í•œ ê°ê´€ì‹ ë¬¸ì œì˜ optionì€ 1,2,3,4ë²ˆìœ¼ë¡œ ë³´ê¸°ë¥¼ êµ¬ì„±í•´ì¤˜. ê·¸ë¦¬ê³  ê°ê´€ì‹ ë¬¸ì œì˜ ë‹µì€ ë³´ê¸°ì˜ ë‚´ìš©ì´ ì•„ë‹Œ ë³´ê¸°ì˜ ë²ˆí˜¸( ì˜ˆë¥¼ ë“¤ë©´ 1ë²ˆ)ë¡œ ì‘ì„±í•´ì¤˜. ê·¸ë¦¬ê³  ê°ê´€ì‹ ë¿ ë§Œ ì•„ë‹ˆë¼ ì£¼ê´€ì‹ ë¬¸ì œë„ ë§Œë“¤ì–´ì¤˜  ì¶œë ¥ í˜•íƒœ ì˜ˆì‹œ {   \"title\": ë¬¸ì„œ ì œëª©   \"summary\": ë¬¸ì„œ ìš”ì•½ ë‚´ìš©   \"quiz\": [     {       \"type\": ê°ê´€ì‹       \"question\": ë¬¸ì œ ë‚´ìš©       \"options\": ê°ê´€ì‹ ë²ˆí˜¸       \"answer\": ë‹µ       \"explanation\": ë¬¸ì œ ì„¤ëª…     },     {       \"type\": \"ë‹¨ë‹µí˜•\",       \"question\": ë¬¸ì œ       \"answer\": ë¬¸ì œì˜ ë‹µ     }   ] }"
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        2096,
        -2416
      ],
      "id": "21bb2c7c-67e8-4a62-8f89-de395ce801ec",
      "name": "Message a model1"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT \n  a.id as a_id,\n  q.id as q_id,\n  a.title,\n  a.summary,\n  q.quiz_data\nFROM quizzes q\nJOIN articles a ON q.article_id = a.id\nORDER BY RANDOM()\nLIMIT 1;",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1168,
        -1776
      ],
      "id": "38889f47-c9ae-4250-93c4-54e56d7a58ff",
      "name": "Execute a SQL query1",
      "credentials": {
        "postgres": {
          "id": "N80VCq4QVguFFgNg",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "article_link",
              "cssSelector": ".news-tit a",
              "returnValue": "attribute",
              "attribute": "href",
              "returnArray": true
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.html",
      "typeVersion": 1.2,
      "position": [
        832,
        -2416
      ],
      "id": "7c1f14c6-eac8-451f-8a09-66c65352cf7a",
      "name": "HTML"
    },
    {
      "parameters": {
        "fieldToSplitOut": "article_link",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1024,
        -2416
      ],
      "id": "6dd991b1-59ab-4ce2-96bf-5cb9cf2c3dd3",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "url": "={{ $('Limit1').item.json.article_link }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1552,
        -2416
      ],
      "id": "72eaef97-d0a6-4a4b-b8c7-c27c627bb9ef",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "title",
              "cssSelector": "h1.headline"
            },
            {
              "key": "date",
              "cssSelector": ".txt-date"
            },
            {
              "key": "contents",
              "cssSelector": "#articletxt"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.html",
      "typeVersion": 1.2,
      "position": [
        1728,
        -2416
      ],
      "id": "ad7a190b-e332-44af-be7a-06e363865a92",
      "name": "HTML3"
    },
    {
      "parameters": {
        "maxItems": 5
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        1200,
        -2416
      ],
      "id": "5b28f817-4b27-4cd3-8378-5b0bbd63bc8d",
      "name": "Limit1"
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "articles",
          "mode": "list",
          "cachedResultName": "articles"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "url": "={{ $('Split Out1').item.json.article_link }}",
            "title": "={{ $json.title }}",
            "raw_text": "={{ $json.contents }}"
          },
          "matchingColumns": [
            "url"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "url",
              "displayName": "url",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "raw_text",
              "displayName": "raw_text",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "summary",
              "displayName": "summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "fetched_at",
              "displayName": "fetched_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "outputColumns": [
            "id"
          ]
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1920,
        -2416
      ],
      "id": "ca5a5795-07c6-4022-8e77-8d775fa980cc",
      "name": "Save_Article1",
      "credentials": {
        "postgres": {
          "id": "N80VCq4QVguFFgNg",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "quizzes",
          "mode": "list",
          "cachedResultName": "quizzes"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "quiz_data": "={{ $json.output[0].content[0].text }}",
            "execution_id": "={{ $('Start_Log1').item.json.id }}",
            "article_id": "={{ $('Save_Article1').item.json.id }}",
            "difficulty": "MEDIUM"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "execution_id",
              "displayName": "execution_id",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "article_id",
              "displayName": "article_id",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "quiz_data",
              "displayName": "quiz_data",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "object",
              "canBeUsedToMatch": true
            },
            {
              "id": "difficulty",
              "displayName": "difficulty",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "options",
              "canBeUsedToMatch": true,
              "options": [
                {
                  "name": "EASY",
                  "value": "EASY"
                },
                {
                  "name": "MEDIUM",
                  "value": "MEDIUM"
                },
                {
                  "name": "HARD",
                  "value": "HARD"
                }
              ]
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        2416,
        -2416
      ],
      "id": "577405fa-e1d1-4185-9ea0-3dc76472f88a",
      "name": "Save_Quiz1",
      "credentials": {
        "postgres": {
          "id": "N80VCq4QVguFFgNg",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "execution_logs",
          "mode": "list",
          "cachedResultName": "execution_logs"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "status": "RUNNING",
            "created_at": "={{$now}}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "options",
              "canBeUsedToMatch": true,
              "options": [
                {
                  "name": "SUCCESS",
                  "value": "SUCCESS"
                },
                {
                  "name": "FAILED",
                  "value": "FAILED"
                },
                {
                  "name": "RUNNING",
                  "value": "RUNNING"
                }
              ]
            },
            {
              "id": "pdf_url",
              "displayName": "pdf_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "error_log",
              "displayName": "error_log",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1360,
        -2416
      ],
      "id": "54d14bff-3388-4f45-a968-dbf240f556d5",
      "name": "Start_Log1",
      "credentials": {
        "postgres": {
          "id": "N80VCq4QVguFFgNg",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://www.hankyung.com/financial-market/cryptocurrency-fintech",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        656,
        -2416
      ],
      "id": "5f778cd3-a1a7-4489-bbb1-6a0c08c9e4d7",
      "name": "HTTP Request4"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "select * from quizzes;",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        2784,
        -448
      ],
      "id": "8bb77d2e-2ba7-4fd2-8b62-0ab8176cb139",
      "name": "Execute a SQL query2",
      "credentials": {
        "postgres": {
          "id": "N80VCq4QVguFFgNg",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- 1. ë¨¼ì € í€´ì¦ˆë¥¼ ì‚­ì œ (ê¸°ì‚¬ë¥¼ ì°¸ì¡°í•˜ê³  ìˆìœ¼ë¯€ë¡œ)\nDELETE FROM quizzes WHERE article_id = '{{ $('Execute a SQL query1').item.json.q_id }}';\n-- 2. ê·¸ ë‹¤ìŒ ê¸°ì‚¬ë¥¼ ì‚­ì œ\nDELETE FROM articles WHERE id = '{{ $('Execute a SQL query1').item.json.a_id }}';",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1600,
        -1776
      ],
      "id": "d529e937-79da-4909-9daa-7ee93a7b90ce",
      "name": "Execute a SQL query3",
      "credentials": {
        "postgres": {
          "id": "N80VCq4QVguFFgNg",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT count(*) as total FROM quizzes;",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        2624,
        -2416
      ],
      "id": "50f20eea-b6b5-4973-968b-bd0eceda5805",
      "name": "Execute a SQL query4",
      "credentials": {
        "postgres": {
          "id": "N80VCq4QVguFFgNg",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "2c34617d-b635-445f-b020-e7d716a3d751",
              "leftValue": "={{ $json.total.toNumber() % 5 }}",
              "rightValue": 0,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2816,
        -2416
      ],
      "id": "fbb26136-d871-487e-8bca-a1dc391c7a88",
      "name": "If"
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "í˜„ì¬ DBì— ë¬¸ì œê°€ ì¶©ë¶„íˆ ìŒ“ì˜€ìŠµë‹ˆë‹¤! í’€ì–´ì£¼ì„¸ìš”!",
        "options": {}
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        2976,
        -2304
      ],
      "id": "8e03fcc5-ced4-419b-b126-e774284a754e",
      "name": "Discord",
      "webhookId": "3f997798-b175-456f-9cb2-439b66ef4ada",
      "credentials": {
        "discordWebhookApi": {
          "id": "sWokKhKc9sJ4NMI2",
          "name": "Discord Webhook account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook (User Trigger)": {
      "main": [
        [
          {
            "node": "Switch (URL vs Random)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch (URL vs Random)": {
      "main": [
        [
          {
            "node": "Get Webpage HTML",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Execute a SQL query1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Webpage HTML": {
      "main": [
        [
          {
            "node": "Markdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Send to GAS (Fire & Forget)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Execute a SQL query3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model1": {
      "main": [
        [
          {
            "node": "Save_Quiz1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute a SQL query1": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "HTML3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML3": {
      "main": [
        [
          {
            "node": "Save_Article1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "Start_Log1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save_Article1": {
      "main": [
        [
          {
            "node": "Message a model1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Start_Log1": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request4": {
      "main": [
        [
          {
            "node": "HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute a SQL query2": {
      "main": [
        []
      ]
    },
    "Save_Quiz1": {
      "main": [
        [
          {
            "node": "Execute a SQL query4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute a SQL query4": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Discord",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute a SQL query3": {
      "main": [
        [
          {
            "node": "Send to GAS (Fire & Forget)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "7cd936bf-97d8-4500-822a-a5b8555fe32c",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "834cd0e38dfaee0eddaa4be7ee456407c587ad22f8d0fb1213aaca26790b4a87"
  },
  "id": "yCwlDfeu_CGIba3e_zfHK",
  "tags": []
}